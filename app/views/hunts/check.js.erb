<% unless @end_of_game %>
  $('#hunt-contents').html("<%= j render 'hunt_content', hunt: @hunt, checkpoint: @checkpoint %>")

  $(document).ready(function() {
    var handler = Gmaps.build('Google');
    handler.buildMap({ internal: { id: 'map' } }, function() {
      circle = [{lng: <%= @checkpoint.log %>, lat: <%= @checkpoint.lat %>, radius: 25, strokeColor: '#0000FF'}]
      var markers = handler.addMarkers(<%= raw @hash.to_json %>);
      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      handler.getMap().setZoom(16);
      handler.addCircles(circle)
    });
  });

  // update checkoint_id field
  $('#check_checkpoint_id').val(<%= @checkpoint.id %>)
  <% if @checkpoint_fail %>
    $('#fail-modal .modal-body').html('<%= @checkpoint.clue %>');
    $('#fail-modal').modal('show');
  <% else %>
    $('#content-modal .modal-body').html('<%= @checkpoint.content %>');
    $('#content-modal').modal('show');
  <% end %>

<% else %>

   <% if @end_of_game %>
    $('#end-modal .modal-body').html('Congrads you won');
    $('#end-modal').modal('show');
   <% end %>

<% end %>
